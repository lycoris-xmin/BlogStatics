$(function(){$("#container");const t=$("button.unit");window.lycoris={totast:$.lycorisTotast()};const o={redirect:"/"};$("button[login]").on("click",async function(){const t=$(this).parent(),i={email:t.find('input[name="email"]').val(),password:t.find('input[name="password"]').val()};if(i.email)if(i.password)try{const t=$.createHttpRequest();t.url="/authentication/login/validate",t.data=i;let n=await t.post();n&&0==n.resCode&&(t.url="/authentication/login/oathcode",t.data={email:i.email,oathCode:n.data.oathCode,remember:!0},n=await t.post(),n&&0==n.resCode&&(location.href=o.redirect))}catch(t){}else window.lycoris.totast.warn("密码不能为空！");else window.lycoris.totast.warn("邮箱不能为空！")}),$("button[home]").on("click",function(){location.href="/"}),$("button[register]").on("click",function(){location.href=`/authentication/register${location.search}`}),$("button[forget]").on("click",function(){location.href=`/authentication/forget${location.search}`}),t.on("click",function(){$(this).data("type");window.lycoris.totast.warn(`${$(this).data("title")}登录还未开发`)}),this.init=function(){if(window.lycoris.totast=$.lycorisTotast(),$('script[type="application/json"]').length){const t=$('script[type="application/json"]').text(),i=JSON.parse(t);i&&Object.keys(i).length&&i.redirect&&(o.redirect=i.redirect)}$(".line-loading-preloader").removeClass("show-loading").remove()},this.init()});