$(function(){$("#container");const t=$("button.unit");window.lycoris={totast:$.lycorisTotast()};const i={redirect:"/"};$("button[register]").on("click",function(){location.href=`/authentication/register${location.search}`}),$("button[login]").on("click",async function(){const t=$(this).parent(),o={email:t.find('input[name="email"]').val(),password:t.find('input[name="password"]').val()};if(o.email)if(o.password)try{const t=$.createHttpRequest();t.url="/authentication/login/validate",t.data=o;let e=await t.post();e&&0==e.resCode&&(t.url="/authentication/login/oathcode",t.data={email:o.email,oathCode:e.data.oathCode,remember:!0},e=await t.post(),e&&0==e.resCode&&(location.href=i.redirect))}catch(t){}else window.lycoris.totast.warn("密码不能为空！");else window.lycoris.totast.warn("邮箱不能为空！")}),$("button[home]").on("click",function(){location.href="/"}),t.on("click",function(){$(this).data("type");window.lycoris.totast.warn(`${$(this).data("title")}登录还未开发`)}),this.init=function(){if(window.lycoris.totast=$.lycorisTotast(),$('script[type="application/json"]').length){const t=$('script[type="application/json"]').text(),o=JSON.parse(t);o&&Object.keys(o).length&&o.redirect&&(i.redirect=o.redirect)}$(".line-loading-preloader").removeClass("show-loading").remove()},this.init()});