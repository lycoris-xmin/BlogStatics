$(function(){function n(){if(s.containerWidth=$(".container").width(),s.column.padding=s.containerWidth-s.column.count*s.column.width,s.column.padding<0)return s.column.count--,void n();for(let n=0;n<s.column.count;n++)s.column.height.push({index:0,height:0,left:n*s.column.padding+n*s.column.width})}function i(n){const i=`\n    <div class="flex-item card card-border">\n      <div>\n        <div class="header">\n            <img src="${n.logo}" onerror="javascript:this.src='/statics/images/404.png'" />\n        </div>\n        <div class="line-wrap"></div>\n        <div class="body">\n            <p class="name" data-link="${n.link}">${n.name}</p>\n            <p class="des">${n.description}</p>\n        </div>\n      </div>\n    </div>  \n    `;return i}function t(n){const i=$(n);var t=s.column.height.reduce(function(n,i){return i.height<n.height?i:n});t.height+=1.5*s.column.padding,i.css("left",`${t.left}px`),i.css("top",`${t.height}px`),$(".friend-flex").append(i);const e=i.height();t.height+=e,i.find("p.name").on("click",function(){window.open($(this).data("link"))})}async function e(){if(!o.done)try{const e=$.createHttpRequest();e.url="/friendly/list",e.data={pageIndex:o.pageIndex,pageSize:o.pageSize};const c=await e.get();if(c&&0==c.resCode)if(c.data.list&&c.data.list.length){for(let n of c.data.list){const e=i(n);t(e)}var n=s.column.height.reduce(function(n,i){return i.height>n.height?i:n});$(".friend-flex").css("height",`${n.height}px`)}else o.done=!1}finally{}}const o={pageIndex:1,pageSize:20,done:!1},s={containerWidth:1300,column:{width:320,count:4,height:[],padding:0}},c=$("#apply-Modal").blogModal();$('textarea[name="description"]').on("input",function(){const n=$(this).val(),i=parseInt($(this).attr("maxlength"));$(this).next().find("span").text(n.length),n.length>=i?$(this).next().css("color","var(--color-danger)"):$(this).next().css("color","var(--color-dark-light)")}),$("button[apply]").on("click",function(){c.show()}),$("div.remind").find("span.value").on("click",function(){$.copyText($(this).text()),window.lycoris.totast.success("复制成功")}),$("div.owner-chevron>span").on("click",function(){const n=$(this).parent().next();$(this).hasClass("slide-up")?(n.slideUp(400),$(this).removeClass("slide-up")):(n.slideDown(400),$(this).addClass("slide-up"))}),this.init=async function(){n(),await e(),window.lycoris.loading.hide(),window.lycoris.record("友情链接")},this.init()});