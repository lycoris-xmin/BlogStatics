$(function(){const t=$("#container"),i=$("div.social-icons").find("a");window.lycoris={totast:$.lycorisTotast()};const e={redirect:"/"};$("#register").on("click",function(){t.addClass("active")}),$("#login").on("click",function(){t.removeClass("active")}),$("button.register").on("click",function(){$(this).parent()}),$("button.login").on("click",async function(){const t=$(this).parent(),i={email:t.find('input[name="email"]').val(),password:t.find('input[name="password"]').val()};if(i.email)if(i.password)try{const t=$.createHttpRequest();t.url="/login/validate",t.data=i;let a=await t.post();a&&0==a.resCode&&(t.url="/login/oathcode",t.data={email:i.email,oathCode:a.data.oathCode,remember:!0},a=await t.post(),a&&0==a.resCode&&(location.href=e.redirect))}catch(t){}else window.lycoris.totast.warn("密码不能为空！");else window.lycoris.totast.warn("邮箱不能为空！")}),i.on("click",function(){$(this).data("type");totast.warn(`${$(this).data("title")}登录还未开发`)}),this.init=function(){if($('script[type="application/json"]').length){const t=$('script[type="application/json"]').text(),i=JSON.parse(t);i&&Object.keys(i).length&&i.redirect&&(e.redirect=i.redirect)}},this.init()});