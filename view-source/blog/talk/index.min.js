$(function(){async function n(){try{const n=$.createHttpRequest();n.url="/talk/list",n.data={pageIndex:s.pageIndex,pageSize:s.pageSize};const i=await n.get();if(i&&0==i.resCode){s.maxPageIndex=$.getMaxPageIndex(i.data.count,s.pageSize);let n="";for(let e of i.data.list)n=n.concat(a(e));i.data.count>0&&$("ul.talk-group").html(n),$.scroll.toTop(),e(s.pageIndex)}}finally{}}function a(n){const a=$.getUserAgentImg(n.agentFlag);return`\n    <li>\n      <div class="card">\n        <div class="card-header border-bottom dashed">\n            <div class="flex-between-center">\n                <div class="flex-start-center">\n                    <div class="avatar">\n                        <img src="./statics/avatar/default_admin.jpg" onerror="javascript:this.src='./statics/avatar/default_admin.jpg'" />\n                    </div>\n                    <div>\n                        <span>Lycoris</span>\n                        <span>${n.createTime}</span>\n                    </div>\n                </div>\n                <div class="flex-end-center">\n                    <div>\n                        <span class="mdi mdi-map-marker-radius"></span>\n                        <span>${n.ipAddress}</span>\n                    </div>\n                    <img class="client" src="${a.url}"  title="${a.title}"/>\n                </div>\n            </div>\n        </div>\n        <div class="card-body">\n            <p>${n.content}</p>\n        </div>\n      </div>\n    </li>\n    `}function e(n){if(n=n||1,s.maxPageIndex>1){const a=$.getPageNumber(n,s.maxPageIndex);let e="";e='\n    <li class="page-item page-btn" data-index="-1">\n      <span class="page-link">上一页</span>\n    </li>\n    ';for(let i of a)e+=`\n      <li class="page-item page-number ${i==n?"active":""}" data-index="${i}">\n        <span class="page-link">${i}</span>\n      </li>\n      `;e+='\n    <li class="page-item page-btn" data-index="1">\n      <span class="page-link">下一页</span>\n    </li>\n    ',t.pagination.html(e),i()}else t.pagination.parent().remove()}function i(){t.pagination.find(">li.page-number").on("click",async function(){const a=$(this).data("index");s.pageIndex!=a&&(s.pageIndex=a,s.maxPageIndex>a?e($(this).data("index")):(t.pagination.find(">li.page-number").removeClass("active"),$(this).addClass("active")),await n())}),t.pagination.find(">li.page-btn").on("click",function(){const n=parseInt($(this).data("index"));let a=s.pageIndex+n;a<1||a>s.maxPageIndex||t.pagination.find(`>li.page-number[data-index="${a}"]`).trigger("click")})}const t={pagination:$("div[pagination]").find("ul.pagination")},s={pageIndex:1,pageSize:10,maxPageIndex:1};this.init=async function(){await n(),window.lycoris.loading.hide(),window.lycoris.record("瞬间")},this.init()});