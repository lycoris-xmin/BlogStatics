$(function(){async function a(){try{const a=$.createHttpRequest();a.url="/talk/list",a.data={pageIndex:s.pageIndex,pageSize:s.pageSize};const i=await a.get();if(i&&0==i.resCode){s.maxPageIndex=$.getMaxPageIndex(i.data.count,s.pageSize);let a="";for(let e of i.data.list)a=a.concat(n(e));i.data.count>0&&$("ul.talk-group").html(a),$.scroll.toTop(),e(s.pageIndex)}}finally{}}function n(a){const n=$.getUserAgentImg(a.agentFlag);return`\n    <li>\n      <div class="card">\n        <div class="card-header border-bottom dashed">\n            <div class="flex-between-center">\n                <div class="flex-start-center">\n                    <div class="avatar">\n                        <img src="./statics/avatar/default_admin.jpg" onerror="javascript:this.src='./statics/avatar/default_admin.jpg'" />\n                    </div>\n                    <div>\n                        <span>Lycoris</span>\n                        <span>${a.createTime}</span>\n                    </div>\n                </div>\n                <div class="flex-end-center">\n                    <div>\n                        <span class="mdi mdi-map-marker-radius"></span>\n                        <span>${a.ipAddress}</span>\n                    </div>\n                    <img class="client" src="${n.url}"  title="${n.title}"/>\n                </div>\n            </div>\n        </div>\n        <div class="card-body">\n            <p>${a.content}</p>\n        </div>\n      </div>\n    </li>\n    `}function e(a){if(a=a||1,s.maxPageIndex>1){const n=$.getPageNumber(a,s.maxPageIndex);let e="";e='\n    <li class="page-item page-btn" data-index="-1">\n      <span class="page-link">上一页</span>\n    </li>\n    ';for(let i of n)e+=`\n      <li class="page-item page-number ${i==a?"active":""}" data-index="${i}">\n        <span class="page-link">${i}</span>\n      </li>\n      `;e+='\n    <li class="page-item page-btn" data-index="1">\n      <span class="page-link">下一页</span>\n    </li>\n    ',t.pagination.html(e),i()}else t.pagination.parent().remove()}function i(){t.pagination.find(">li.page-number").on("click",async function(){const n=$(this).data("index");s.pageIndex!=n&&(s.pageIndex=n,s.maxPageIndex>n?e($(this).data("index")):(t.pagination.find(">li.page-number").removeClass("active"),$(this).addClass("active")),await a())}),t.pagination.find(">li.page-btn").on("click",function(){const a=parseInt($(this).data("index"));let n=s.pageIndex+a;n<1||n>s.maxPageIndex||t.pagination.find(`>li.page-number[data-index="${n}"]`).trigger("click")})}const t={pagination:$("div[pagination]").find("ul.pagination")},s={pageIndex:1,pageSize:10,maxPageIndex:1};this.init=async function(){await a(),window.lycoris.loading.hide()},this.init()});