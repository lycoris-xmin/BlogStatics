$(function(){function e(){let e=0,n=void 0;const i=document.getElementsByTagName("*");for(var t=0;t<i.length;t++){var s=i[t],o=parseInt(getComputedStyle(s).zIndex,10);o>e&&(e=o,n=s)}return{highestEl:n,highestZIndex:e}}let n=void 0;const i=e=>{const n=`\n    <div data-preview class="image-preview flex-center-center">\n      <div class="flex-center-center">\n        <img src="${e}" onerror="javascript:this.src='/statics/images/404.png'" />\n        <div class="close">\n            <i class="mdi mdi-close mdi-24px"></i>\n        </div>\n      </div>\n    </div>\n    `;return n};window.lycoris.events.on("image-previe.show",function(t){if(n&&n.length)n.find("img").attr("src",t);else{const e=i(t);$("body").append(e),n=$("div.image-preview[data-preview]"),n.find("div.close").on("click",function(e){e.stopPropagation(),n.fadeOut()}),n.on("click","div.card",function(e){e.stopPropagation()}),n.on("click",function(e){e.stopPropagation(),e.target in n||n.find("div.close").trigger("click")}),$(document).on("keydown.esc",function(e){"flex"==n.css("display")&&(e.preventDefault(),e.stopPropagation(),n.fadeOut())})}const s=e();s.highestEl!=n&&n.css({"z-index":s.highestZIndex+1}),n.fadeIn().css("display","flex")})});