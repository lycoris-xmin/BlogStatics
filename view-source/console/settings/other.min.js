$(function(){const dom=$("#other"),selectpicker={monitoringPush:dom.find(".service").find('select[name="monitoringPush"]').bootstrapSelectpicker(),commentPush:dom.find(".service").find('select[name="commentPush"]').bootstrapSelectpicker(),messagePush:dom.find(".service").find('select[name="messagePush"]').bootstrapSelectpicker()},button={showdoc:{test:dom.find(".service").find("button[test]"),save:dom.find(".service").find("button[save]")},file:dom.find(".data-clear").find(".file").find("button[save]"),sql:dom.find(".data-clear").find(".sql").find("button[save]")};dom.find("div.other").find(">.flex-between-center:first-child").on("click",function(t){t.stopPropagation();let o=$(this).attr("data-shrink");o=0==o?1:0;const s=$(this).next();o?s.slideDown(300):s.slideUp(300),$(this).attr("data-shrink",o)}),selectpicker.monitoringPush.on("change",function(){const val=eval($(this).val()),container=dom.find(".service").find("div.monitor-container");val?container.fadeIn(300):container.fadeOut(300)}),button.showdoc.test.on("click",function(){}),button.showdoc.save.on("click",async function(){$(this).setBusy();try{const t=dom.find(".showdoc").find("form").toJson(),o=window.lycoris.createRequest();o.url="/settings/other/showdoc",o.data={...t};const s=await o.post();s&&0==s.resCode&&window.lycoris.totast.success("Showdoc配置保存成功")}finally{$(this).clearBusy()}}),button.file.on("click",async function(){$(this).setBusy();try{const t=dom.find(".data-clear").find(".file").toJson(),o=window.lycoris.createRequest();o.url="/settings/other/dataclear/file",o.data={...t};const s=await o.post();s&&0==s.resCode&&window.lycoris.totast.success("文件清理配置保存成功")}finally{$(this).clearBusy()}}),button.sql.on("click",async function(){$(this).setBusy();try{const t=dom.find(".data-clear").find(".sql").toJson(),o=window.lycoris.createRequest();o.url="/settings/other/dataclear/sql",o.data={...t};const s=await o.post();s&&0==s.resCode&&window.lycoris.totast.success("数据库清理配置保存成功")}finally{$(this).clearBusy()}}),this.init=function(){window.lycoris.events.on("other",function(t){if(t.showdoc){const o=dom.find("div.service");o.formAutoFill(t.showdoc),selectpicker.monitoringPush.set(t.showdoc.monitoringPush.toString()),selectpicker.commentPush.set(t.showdoc.commentPush.toString()),selectpicker.messagePush.set(t.showdoc.messagePush.toString()),selectpicker.monitoringPush.trigger("change")}if(t.dataClear){const o=dom.find("div.data-clear");o.formAutoFill(t.dataClear)}})},this.init()});