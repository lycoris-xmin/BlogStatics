$(function(){const i=$("#staticfile"),n={uploadChannel:i.find('select[name="uploadChannel"]').bootstrapSelectpicker(),localBackup:i.find('select[name="localBackup"]').bootstrapSelectpicker(),loadFileSrc:i.find('select[name="loadFileSrc"]').bootstrapSelectpicker()};i.find('select[name="uploadChannel"]').on("change",function(){const e=$(this).val();if(i.find("div.channel.active").slideUp(300).removeClass("active"),0==e)return n.localBackup.disable(),void n.loadFileSrc.disable();n.localBackup.enable(),n.loadFileSrc.enable(),10==e?i.find("div.channel.github").slideDown(300).addClass("active"):20==e?i.find("div.channel.minio").slideDown(300).addClass("active"):30==e?i.find("div.channel.aliyun").slideDown(300).addClass("active"):40==e?i.find("div.channel.tencent").slideDown(300).addClass("active"):50==e?i.find("div.channel.huawei").slideDown(300).addClass("active"):60==e&&i.find("div.channel.kudo").slideDown(300).addClass("active")}),i.find("button[save]").on("click",async function(){$(this).setBusy();try{const n=i.find("form"),e=n.find("div.basic").toJson();e.github=n.find("div.github").toJson(),e.monio=n.find("div.minio").toJson();const a=window.lycoris.createRequest();a.url="/settings/staticfile",a.data={...e};const l=await a.post();l&&0==l.resCode&&window.lycoris.totast.success("保存成功")}finally{$(this).clearBusy()}}),this.init=function(){window.lycoris.events.on("staticFile",function(e){n.uploadChannel.set(e.uploadChannel.toString()),n.localBackup.set(e.localBackup.toString()),n.loadFileSrc.set(e.loadFileSrc.toString());const a=i.find("div.channel.github");a.formAutoFill(e.github);const l=i.find("div.channel.monio");l.formAutoFill(e.minio),i.find('select[name="uploadChannel"]').trigger("change")})},this.init()});