import{addWeeks,diffWeeks,DateProfileGenerator,createElement,listenBySelector,removeElement,computeRect,computeClippingRect,applyStyle,cssToStr,htmlEscape,FgEventRenderer,appendToElement,prependToElement,htmlToElement,FillRenderer,memoizeRendering,createFormatter,addDays,DateComponent,rangeContainsMarker,getDayClasses,findElements,PositionCache,buildGotoAnchorHtml,findChildren,insertAfterElement,intersectRanges,ScrollComponent,matchCellWidths,uncompensateScroll,compensateScroll,subtractInnerElHeight,distributeHeight,undistributeHeight,View,Slicer,memoize,DayHeader,DaySeries,DayTable,createPlugin}from"@fullcalendar/core";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}))(e,t)};function __extends(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},DayGridDateProfileGenerator=function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return __extends(e,i),e.prototype.buildRenderRange=function(e,t,r){var n=this.dateEnv,e=i.prototype.buildRenderRange.call(this,e,t,r),r=e.start,e=e.end;return/^(year|month)$/.test(t)&&(r=n.startOfWeek(r),(t=n.startOfWeek(e)).valueOf()!==e.valueOf())&&(e=addWeeks(t,1)),this.options.monthMode&&this.options.fixedWeekCount&&(n=Math.ceil(diffWeeks(r,e)),e=addWeeks(e,6-n)),{start:r,end:e}},e}(DateProfileGenerator),Popover=function(){function e(e){var t=this;this.isHidden=!0,this.margin=10,this.documentMousedown=function(e){t.el&&!t.el.contains(e.target)&&t.hide()},this.options=e}return e.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.style.display="",this.position(),this.isHidden=!1,this.trigger("show"))},e.prototype.hide=function(){this.isHidden||(this.el.style.display="none",this.isHidden=!0,this.trigger("hide"))},e.prototype.render=function(){var t=this,e=this.options,r=this.el=createElement("div",{className:"fc-popover "+(e.className||""),style:{top:"0",left:"0"}});"function"==typeof e.content&&e.content(r),e.parentEl.appendChild(r),listenBySelector(r,"click",".fc-close",function(e){t.hide()}),e.autoHide&&document.addEventListener("mousedown",this.documentMousedown)},e.prototype.destroy=function(){this.hide(),this.el&&(removeElement(this.el),this.el=null),document.removeEventListener("mousedown",this.documentMousedown)},e.prototype.position=function(){var e=this.options,t=this.el,r=t.getBoundingClientRect(),n=computeRect(t.offsetParent),i=computeClippingRect(e.parentEl),o=e.top||0,e=void 0!==e.left?e.left:void 0!==e.right?e.right-r.width:0;o=Math.min(o,i.bottom-r.height-this.margin),o=Math.max(o,i.top+this.margin),e=Math.min(e,i.right-r.width-this.margin),e=Math.max(e,i.left+this.margin),applyStyle(t,{top:o-n.top,left:e-n.left})},e.prototype.trigger=function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))},e}(),SimpleDayGridEventRenderer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.renderSegHtml=function(e,t){var r=this.context,n=r.view,r=r.options,i=e.eventRange,o=i.def,s=i.ui,l=o.allDay,a=n.computeEventDraggable(o,s),d=l&&e.isStart&&n.computeEventStartResizable(o,s),l=l&&e.isEnd&&n.computeEventEndResizable(o,s),n=this.getSegClasses(e,a,d||l,t),a=cssToStr(this.getSkinCss(s)),t="";return n.unshift("fc-day-grid-event","fc-h-event"),e.isStart&&(s=this.getTimeText(i))&&(t='<span class="fc-time">'+htmlEscape(s)+"</span>"),e='<span class="fc-title">'+(htmlEscape(o.title||"")||"&nbsp;")+"</span>",'<a class="'+n.join(" ")+'"'+(o.url?' href="'+htmlEscape(o.url)+'"':"")+(a?' style="'+a+'"':"")+'><div class="fc-content">'+("rtl"===r.dir?e+" "+t:t+" "+e)+"</div>"+(d?'<div class="fc-resizer fc-start-resizer"></div>':"")+(l?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},t.prototype.computeEventTimeFormat=function(){return{hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}},t.prototype.computeDisplayEventEnd=function(){return!1},t}(FgEventRenderer),DayGridEventRenderer=function(r){function e(e){var t=r.call(this,e.context)||this;return t.dayGrid=e,t}return __extends(e,r),e.prototype.attachSegs=function(e,t){var r=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach(function(e,t){e.querySelector(".fc-content-skeleton > table").appendChild(r[t].tbodyEl)}),t||this.dayGrid.removeSegPopover()},e.prototype.detachSegs=function(){for(var e,t=this.rowStructs||[];e=t.pop();)removeElement(e.tbodyEl);this.rowStructs=null},e.prototype.renderSegRows=function(e){for(var t=[],r=this.groupSegRows(e),n=0;n<r.length;n++)t.push(this.renderSegRow(n,r[n]));return t},e.prototype.renderSegRow=function(e,t){var r,n,i,o,s,l,a=this.dayGrid,d=a.colCnt,c=a.isRtl,h=this.buildSegLevels(t),p=Math.max(1,h.length),u=document.createElement("tbody"),f=[],m=[],y=[];function g(e){for(;i<e;)(l=(y[r-1]||[])[i])?l.rowSpan=(l.rowSpan||1)+1:(l=document.createElement("td"),o.appendChild(l)),m[r][i]=l,y[r][i]=l,i++}for(r=0;r<p;r++){if(n=h[r],i=0,o=document.createElement("tr"),f.push([]),m.push([]),y.push([]),n)for(s=0;s<n.length;s++){var v=n[s],b=c?d-1-v.lastCol:v.firstCol,E=c?d-1-v.firstCol:v.lastCol;for(g(b),l=createElement("td",{className:"fc-event-container"},v.el),b!==E?l.colSpan=E-b+1:y[r][i]=l;i<=E;)m[r][i]=l,f[r][i]=v,i++;o.appendChild(l)}g(d);var S=a.renderProps.renderIntroHtml();S&&(a.isRtl?appendToElement:prependToElement)(o,S),u.appendChild(o)}return{row:e,tbodyEl:u,cellMatrix:m,segMatrix:f,segLevels:h,segs:t}},e.prototype.buildSegLevels=function(e){var t,r,n,i=this.dayGrid,o=i.isRtl,s=i.colCnt,l=[];for(e=this.sortEventSegs(e),t=0;t<e.length;t++){for(r=e[t],n=0;n<l.length&&isDaySegCollision(r,l[n]);n++);r.level=n,r.leftCol=o?s-1-r.lastCol:r.firstCol,r.rightCol=o?s-1-r.firstCol:r.lastCol,(l[n]||(l[n]=[])).push(r)}for(n=0;n<l.length;n++)l[n].sort(compareDaySegCols);return l},e.prototype.groupSegRows=function(e){for(var t=[],r=0;r<this.dayGrid.rowCnt;r++)t.push([]);for(r=0;r<e.length;r++)t[e[r].row].push(e[r]);return t},e.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},e}(SimpleDayGridEventRenderer);function isDaySegCollision(e,t){for(var r,n=0;n<t.length;n++)if((r=t[n]).firstCol<=e.lastCol&&r.lastCol>=e.firstCol)return!0;return!1}function compareDaySegCols(e,t){return e.leftCol-t.leftCol}var DayGridMirrorRenderer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.attachSegs=function(e,t){var i=t.sourceSeg,o=this.rowStructs=this.renderSegRows(e);this.dayGrid.rowEls.forEach(function(e,t){var r=htmlToElement('<div class="fc-mirror-skeleton"><table></table></div>'),n=i&&i.row===t?i.el:(n=e.querySelector(".fc-content-skeleton tbody"))||e.querySelector(".fc-content-skeleton table"),n=n.getBoundingClientRect().top-e.getBoundingClientRect().top;r.style.top=n+"px",r.querySelector("table").appendChild(o[t].tbodyEl),e.appendChild(r)})},t}(DayGridEventRenderer),EMPTY_CELL_HTML='<td style="pointer-events:none"></td>',DayGridFillRenderer=function(r){function e(e){var t=r.call(this,e.context)||this;return t.fillSegTag="td",t.dayGrid=e,t}return __extends(e,r),e.prototype.renderSegs=function(e,t){"bgEvent"===e&&(t=t.filter(function(e){return e.eventRange.def.allDay})),r.prototype.renderSegs.call(this,e,t)},e.prototype.attachSegs=function(e,t){for(var r,n,i=[],o=0;o<t.length;o++)r=t[o],n=this.renderFillRow(e,r),this.dayGrid.rowEls[r.row].appendChild(n),i.push(n);return i},e.prototype.renderFillRow=function(e,t){var r=this.dayGrid,n=r.colCnt,i=r.isRtl,o=i?n-1-t.lastCol:t.firstCol,i=(i?n-1-t.firstCol:t.lastCol)+1,e="businessHours"===e?"bgevent":e.toLowerCase(),e=htmlToElement('<div class="fc-'+e+'-skeleton"><table><tr></tr></table></div>'),s=e.getElementsByTagName("tr")[0],o=(0<o&&appendToElement(s,new Array(o+1).join(EMPTY_CELL_HTML)),t.el.colSpan=i-o,s.appendChild(t.el),i<n&&appendToElement(s,new Array(n-i+1).join(EMPTY_CELL_HTML)),r.renderProps.renderIntroHtml());return o&&(r.isRtl?appendToElement:prependToElement)(s,o),e},e}(FillRenderer),DayTile=function(i){function e(e,t){var t=i.call(this,e,t)||this,r=t.eventRenderer=new DayTileEventRenderer(t),n=t.renderFrame=memoizeRendering(t._renderFrame);return t.renderFgEvents=memoizeRendering(r.renderSegs.bind(r),r.unrender.bind(r),[n]),t.renderEventSelection=memoizeRendering(r.selectByInstanceId.bind(r),r.unselectByInstanceId.bind(r),[t.renderFgEvents]),t.renderEventDrag=memoizeRendering(r.hideByHash.bind(r),r.showByHash.bind(r),[n]),t.renderEventResize=memoizeRendering(r.hideByHash.bind(r),r.showByHash.bind(r),[n]),e.calendar.registerInteractiveComponent(t,{el:t.el,useEventCenter:!1}),t}return __extends(e,i),e.prototype.render=function(e){this.renderFrame(e.date),this.renderFgEvents(e.fgSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDragInstances),this.renderEventResize(e.eventResizeInstances)},e.prototype.destroy=function(){i.prototype.destroy.call(this),this.renderFrame.unrender(),this.calendar.unregisterInteractiveComponent(this)},e.prototype._renderFrame=function(e){var t=this.theme,e=this.dateEnv.format(e,createFormatter(this.opt("dayPopoverFormat")));this.el.innerHTML='<div class="fc-header '+t.getClass("popoverHeader")+'"><span class="fc-title">'+htmlEscape(e)+'</span><span class="fc-close '+t.getIconClass("close")+'"></span></div><div class="fc-body '+t.getClass("popoverContent")+'"><div class="fc-event-container"></div></div>',this.segContainerEl=this.el.querySelector(".fc-event-container")},e.prototype.queryHit=function(e,t,r,n){var i=this.props.date;if(e<r&&t<n)return{component:this,dateSpan:{allDay:!0,range:{start:i,end:addDays(i,1)}},dayEl:this.el,rect:{left:0,top:0,right:r,bottom:n},layer:1}},e}(DateComponent),DayTileEventRenderer=function(r){function e(e){var t=r.call(this,e.context)||this;return t.dayTile=e,t}return __extends(e,r),e.prototype.attachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.dayTile.segContainerEl.appendChild(n.el)}},e.prototype.detachSegs=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];removeElement(n.el)}},e}(SimpleDayGridEventRenderer),DayBgRow=function(){function e(e){this.context=e}return e.prototype.renderHtml=function(e){var t=[];e.renderIntroHtml&&t.push(e.renderIntroHtml());for(var r=0,n=e.cells;r<n.length;r++){var i=n[r];t.push(renderCellHtml(i.date,e.dateProfile,this.context,i.htmlAttrs))}return e.cells.length||t.push('<td class="fc-day '+this.context.theme.getClass("widgetContent")+'"></td>'),"rtl"===this.context.options.dir&&t.reverse(),"<tr>"+t.join("")+"</tr>"},e}();function renderCellHtml(e,t,r,n){var i=r.dateEnv,o=r.theme,s=rangeContainsMarker(t.activeRange,e),t=getDayClasses(e,t,r);return t.unshift("fc-day",o.getClass("widgetContent")),'<td class="'+t.join(" ")+'"'+(s?' data-date="'+i.formatIso(e,{omitTime:!0})+'"':"")+(n?" "+n:"")+"></td>"}var DAY_NUM_FORMAT=createFormatter({day:"numeric"}),WEEK_NUM_FORMAT=createFormatter({week:"numeric"}),DayGrid=function(o){function e(e,t,r){var e=o.call(this,e,t)||this,t=(e.bottomCoordPadding=0,e.isCellSizesDirty=!1,e.eventRenderer=new DayGridEventRenderer(e)),n=e.fillRenderer=new DayGridFillRenderer(e),i=(e.mirrorRenderer=new DayGridMirrorRenderer(e),e.renderCells=memoizeRendering(e._renderCells,e._unrenderCells));return e.renderBusinessHours=memoizeRendering(n.renderSegs.bind(n,"businessHours"),n.unrender.bind(n,"businessHours"),[i]),e.renderDateSelection=memoizeRendering(n.renderSegs.bind(n,"highlight"),n.unrender.bind(n,"highlight"),[i]),e.renderBgEvents=memoizeRendering(n.renderSegs.bind(n,"bgEvent"),n.unrender.bind(n,"bgEvent"),[i]),e.renderFgEvents=memoizeRendering(t.renderSegs.bind(t),t.unrender.bind(t),[i]),e.renderEventSelection=memoizeRendering(t.selectByInstanceId.bind(t),t.unselectByInstanceId.bind(t),[e.renderFgEvents]),e.renderEventDrag=memoizeRendering(e._renderEventDrag,e._unrenderEventDrag,[i]),e.renderEventResize=memoizeRendering(e._renderEventResize,e._unrenderEventResize,[i]),e.renderProps=r,e}return __extends(e,o),e.prototype.render=function(e){var t=e.cells;this.rowCnt=t.length,this.colCnt=t[0].length,this.renderCells(t,e.isRigid),this.renderBusinessHours(e.businessHourSegs),this.renderDateSelection(e.dateSelectionSegs),this.renderBgEvents(e.bgEventSegs),this.renderFgEvents(e.fgEventSegs),this.renderEventSelection(e.eventSelection),this.renderEventDrag(e.eventDrag),this.renderEventResize(e.eventResize),this.segPopoverTile&&this.updateSegPopoverTile()},e.prototype.destroy=function(){o.prototype.destroy.call(this),this.renderCells.unrender()},e.prototype.getCellRange=function(e,t){e=this.props.cells[e][t].date;return{start:e,end:addDays(e,1)}},e.prototype.updateSegPopoverTile=function(e,t){var r=this.props;this.segPopoverTile.receiveProps({date:e||this.segPopoverTile.props.date,fgSegs:t||this.segPopoverTile.props.fgSegs,eventSelection:r.eventSelection,eventDragInstances:r.eventDrag?r.eventDrag.affectedInstances:null,eventResizeInstances:r.eventResize?r.eventResize.affectedInstances:null})},e.prototype._renderCells=function(e,t){for(var r,n=this.view,i=this.dateEnv,o=this.rowCnt,s=this.colCnt,l="",a=0;a<o;a++)l+=this.renderDayRowHtml(a,t);for(this.el.innerHTML=l,this.rowEls=findElements(this.el,".fc-row"),this.cellEls=findElements(this.el,".fc-day, .fc-disabled-day"),this.isRtl&&this.cellEls.reverse(),this.rowPositions=new PositionCache(this.el,this.rowEls,!1,!0),this.colPositions=new PositionCache(this.el,this.cellEls.slice(0,s),!0,!1),a=0;a<o;a++)for(r=0;r<s;r++)this.publiclyTrigger("dayRender",[{date:i.toDate(e[a][r].date),el:this.getCellEl(a,r),view:n}]);this.isCellSizesDirty=!0},e.prototype._unrenderCells=function(){this.removeSegPopover()},e.prototype.renderDayRowHtml=function(e,t){var r=this.theme,n=["fc-row","fc-week",r.getClass("dayRow")],t=(t&&n.push("fc-rigid"),new DayBgRow(this.context));return'<div class="'+n.join(" ")+'"><div class="fc-bg"><table class="'+r.getClass("tableGrid")+'">'+t.renderHtml({cells:this.props.cells[e],dateProfile:this.props.dateProfile,renderIntroHtml:this.renderProps.renderBgIntroHtml})+'</table></div><div class="fc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(e)+"</thead>":"")+"</table></div></div>"},e.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.renderProps.cellWeekNumbersVisible||this.renderProps.colWeekNumbersVisible},e.prototype.getIsDayNumbersVisible=function(){return 1<this.rowCnt},e.prototype.renderNumberTrHtml=function(e){var t=this.renderProps.renderNumberIntroHtml(e,this);return"<tr>"+(this.isRtl?"":t)+this.renderNumberCellsHtml(e)+(this.isRtl?t:"")+"</tr>"},e.prototype.renderNumberCellsHtml=function(e){for(var t,r=[],n=0;n<this.colCnt;n++)t=this.props.cells[e][n].date,r.push(this.renderNumberCellHtml(t));return this.isRtl&&r.reverse(),r.join("")},e.prototype.renderNumberCellHtml=function(e){var t,r,n=this.view,i=this.dateEnv,o="",s=rangeContainsMarker(this.props.dateProfile.activeRange,e),l=this.getIsDayNumbersVisible()&&s;return l||this.renderProps.cellWeekNumbersVisible?((t=getDayClasses(e,this.props.dateProfile,this.context)).unshift("fc-day-top"),this.renderProps.cellWeekNumbersVisible&&(r=i.weekDow),o+='<td class="'+t.join(" ")+'"'+(s?' data-date="'+i.formatIso(e,{omitTime:!0})+'"':"")+">",this.renderProps.cellWeekNumbersVisible&&e.getUTCDay()===r&&(o+=buildGotoAnchorHtml(n,{date:e,type:"week"},{class:"fc-week-number"},i.format(e,WEEK_NUM_FORMAT))),l&&(o+=buildGotoAnchorHtml(n,e,{class:"fc-day-number"},i.format(e,DAY_NUM_FORMAT))),o+"</td>"):"<td></td>"},e.prototype.updateSize=function(e){var t=this.fillRenderer,r=this.eventRenderer,n=this.mirrorRenderer;(e||this.isCellSizesDirty||this.view.calendar.isEventsUpdated)&&(this.buildPositionCaches(),this.isCellSizesDirty=!1),t.computeSizes(e),r.computeSizes(e),n.computeSizes(e),t.assignSizes(e),r.assignSizes(e),n.assignSizes(e)},e.prototype.buildPositionCaches=function(){this.buildColPositions(),this.buildRowPositions()},e.prototype.buildColPositions=function(){this.colPositions.build()},e.prototype.buildRowPositions=function(){this.rowPositions.build(),this.rowPositions.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},e.prototype.positionToHit=function(e,t){var r=this.colPositions,n=this.rowPositions,e=r.leftToIndex(e),t=n.topToIndex(t);if(null!=t&&null!=e)return{row:t,col:e,dateSpan:{range:this.getCellRange(t,e),allDay:!0},dayEl:this.getCellEl(t,e),relativeRect:{left:r.lefts[e],right:r.rights[e],top:n.tops[t],bottom:n.bottoms[t]}}},e.prototype.getCellEl=function(e,t){return this.cellEls[e*this.colCnt+t]},e.prototype._renderEventDrag=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs))},e.prototype._unrenderEventDrag=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"))},e.prototype._renderEventResize=function(e){e&&(this.eventRenderer.hideByHash(e.affectedInstances),this.fillRenderer.renderSegs("highlight",e.segs),this.mirrorRenderer.renderSegs(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype._unrenderEventResize=function(e){e&&(this.eventRenderer.showByHash(e.affectedInstances),this.fillRenderer.unrender("highlight"),this.mirrorRenderer.unrender(e.segs,{isResizing:!0,sourceSeg:e.sourceSeg}))},e.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},e.prototype.limitRows=function(e){for(var t,r=this.eventRenderer.rowStructs||[],n=0;n<r.length;n++)this.unlimitRow(n),!1!==(t=!!e&&("number"==typeof e?e:this.computeRowLevelLimit(n)))&&this.limitRow(n,t)},e.prototype.computeRowLevelLimit=function(e){for(var t,r=this.rowEls[e].getBoundingClientRect().bottom,n=findChildren(this.eventRenderer.rowStructs[e].tbodyEl),i=0;i<n.length;i++)if((t=n[i]).classList.remove("fc-limited"),t.getBoundingClientRect().bottom>r)return i;return!1},e.prototype.limitRow=function(t,r){function e(e){for(;w<e;)(l=g.getCellSegs(t,w,r)).length&&(c=i[r-1][w],y=g.renderMoreLink(t,w,l),m=createElement("div",null,y),c.appendChild(m),S.push(m)),w++}var n,i,o,s,l,a,d,c,h,p,u,f,m,y,g=this,v=this.colCnt,b=this.isRtl,E=this.eventRenderer.rowStructs[t],S=[],w=0;if(r&&r<E.segLevels.length){for(n=E.segLevels[r-1],i=E.cellMatrix,(o=findChildren(E.tbodyEl).slice(r)).forEach(function(e){e.classList.add("fc-limited")}),s=0;s<n.length;s++){var C=n[s],R=b?v-1-C.lastCol:C.firstCol,D=b?v-1-C.firstCol:C.lastCol;for(e(R),d=[],a=0;w<=D;)l=this.getCellSegs(t,w,r),d.push(l),a+=l.length,w++;if(a){for(h=(c=i[r-1][R]).rowSpan||1,p=[],u=0;u<d.length;u++)f=createElement("td",{className:"fc-more-cell",rowSpan:h}),l=d[u],y=this.renderMoreLink(t,R+u,[C].concat(l)),m=createElement("div",null,y),f.appendChild(m),p.push(f),S.push(f);c.classList.add("fc-limited"),insertAfterElement(c,p),o.push(c)}}e(this.colCnt),E.moreEls=S,E.limitedEls=o}},e.prototype.unlimitRow=function(e){e=this.eventRenderer.rowStructs[e];e.moreEls&&(e.moreEls.forEach(removeElement),e.moreEls=null),e.limitedEls&&(e.limitedEls.forEach(function(e){e.classList.remove("fc-limited")}),e.limitedEls=null)},e.prototype.renderMoreLink=function(l,a,d){var c=this,h=this.view,p=this.dateEnv,e=createElement("a",{className:"fc-more"});return e.innerText=this.getMoreLinkText(d.length),e.addEventListener("click",function(e){var t=c.opt("eventLimitClick"),r=c.isRtl?c.colCnt-a-1:a,r=c.props.cells[l][r].date,n=e.currentTarget,i=c.getCellEl(l,a),o=c.getCellSegs(l,a),o=c.resliceDaySegs(o,r),s=c.resliceDaySegs(d,r);"popover"===(t="function"==typeof t?c.publiclyTrigger("eventLimitClick",[{date:p.toDate(r),allDay:!0,dayEl:i,moreEl:n,segs:o,hiddenSegs:s,jsEvent:e,view:h}]):t)?c.showSegPopover(l,a,n,o):"string"==typeof t&&h.calendar.zoomTo(r,t)}),e},e.prototype.showSegPopover=function(t,e,r,n){var i=this,o=this.calendar,s=this.view,l=this.theme,a=this.isRtl?this.colCnt-e-1:e,e=r.parentNode,r=1===this.rowCnt?s.el:this.rowEls[t],l={className:"fc-more-popover "+l.getClass("popover"),parentEl:s.el,top:computeRect(r).top,autoHide:!0,content:function(e){i.segPopoverTile=new DayTile(i.context,e),i.updateSegPopoverTile(i.props.cells[t][a].date,n)},hide:function(){i.segPopoverTile.destroy(),i.segPopoverTile=null,i.segPopover.destroy(),i.segPopover=null}};this.isRtl?l.right=computeRect(e).right+1:l.left=computeRect(e).left-1,this.segPopover=new Popover(l),this.segPopover.show(),o.releaseAfterSizingTriggers()},e.prototype.resliceDaySegs=function(e,t){for(var r={start:t,end:addDays(t,1)},n=[],i=0,o=e;i<o.length;i++){var s=o[i],l=s.eventRange,a=l.range,d=intersectRanges(a,r);d&&n.push(__assign({},s,{eventRange:{def:l.def,ui:__assign({},l.ui,{durationEditable:!1}),instance:l.instance,range:d},isStart:s.isStart&&d.start.valueOf()===a.start.valueOf(),isEnd:s.isEnd&&d.end.valueOf()===a.end.valueOf()}))}return n},e.prototype.getMoreLinkText=function(e){var t=this.opt("eventLimitText");return"function"==typeof t?t(e):"+"+e+" "+t},e.prototype.getCellSegs=function(e,t,r){for(var n,i=this.eventRenderer.rowStructs[e].segMatrix,o=r||0,s=[];o<i.length;)(n=i[o][t])&&s.push(n),o++;return s},e}(DateComponent),WEEK_NUM_FORMAT$1=createFormatter({week:"numeric"}),DayGridView=function(s){function e(e,t,r,n){var i,o=s.call(this,e,t,r,n)||this,e=(o.renderHeadIntroHtml=function(){var e=o.theme;return o.colWeekNumbersVisible?'<th class="fc-week-number '+e.getClass("widgetHeader")+'" '+o.weekNumberStyleAttr()+"><span>"+htmlEscape(o.opt("weekLabel"))+"</span></th>":""},o.renderDayGridNumberIntroHtml=function(e,t){var r=o.dateEnv,e=t.props.cells[e][0].date;return o.colWeekNumbersVisible?'<td class="fc-week-number" '+o.weekNumberStyleAttr()+">"+buildGotoAnchorHtml(o,{date:e,type:"week",forceOff:1===t.colCnt},r.format(e,WEEK_NUM_FORMAT$1))+"</td>":""},o.renderDayGridBgIntroHtml=function(){var e=o.theme;return o.colWeekNumbersVisible?'<td class="fc-week-number '+e.getClass("widgetContent")+'" '+o.weekNumberStyleAttr()+"></td>":""},o.renderDayGridIntroHtml=function(){return o.colWeekNumbersVisible?'<td class="fc-week-number" '+o.weekNumberStyleAttr()+"></td>":""},o.el.classList.add("fc-dayGrid-view"),o.el.innerHTML=o.renderSkeletonHtml(),o.scroller=new ScrollComponent("hidden","auto"),o.scroller.el),t=(o.el.querySelector(".fc-body > tr > td").appendChild(e),e.classList.add("fc-day-grid-container"),createElement("div",{className:"fc-day-grid"}));return e.appendChild(t),o.opt("weekNumbers")?o.opt("weekNumbersWithinDays")?o.colWeekNumbersVisible=!(i=!0):o.colWeekNumbersVisible=!(i=!1):i=o.colWeekNumbersVisible=!1,o.dayGrid=new DayGrid(o.context,t,{renderNumberIntroHtml:o.renderDayGridNumberIntroHtml,renderBgIntroHtml:o.renderDayGridBgIntroHtml,renderIntroHtml:o.renderDayGridIntroHtml,colWeekNumbersVisible:o.colWeekNumbersVisible,cellWeekNumbersVisible:i}),o}return __extends(e,s),e.prototype.destroy=function(){s.prototype.destroy.call(this),this.dayGrid.destroy(),this.scroller.destroy()},e.prototype.renderSkeletonHtml=function(){var e=this.theme;return'<table class="'+e.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+e.getClass("widgetHeader")+'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+e.getClass("widgetContent")+'"></td></tr></tbody></table>'},e.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},e.prototype.hasRigidRows=function(){var e=this.opt("eventLimit");return e&&"number"!=typeof e},e.prototype.updateSize=function(e,t,r){s.prototype.updateSize.call(this,e,t,r),this.dayGrid.updateSize(e)},e.prototype.updateBaseSize=function(e,t,r){var n,i=this.dayGrid,o=this.opt("eventLimit"),s=this.header?this.header.el:null;i.rowEls?(this.colWeekNumbersVisible&&(this.weekNumberWidth=matchCellWidths(findElements(this.el,".fc-week-number"))),this.scroller.clear(),s&&uncompensateScroll(s),i.removeSegPopover(),o&&"number"==typeof o&&i.limitRows(o),n=this.computeScrollerHeight(t),this.setGridHeight(n,r),o&&"number"!=typeof o&&i.limitRows(o),r||(this.scroller.setHeight(n),((i=this.scroller.getScrollbarWidths()).left||i.right)&&(s&&compensateScroll(s,i),n=this.computeScrollerHeight(t),this.scroller.setHeight(n)),this.scroller.lockOverflow(i))):r||(n=this.computeScrollerHeight(t),this.scroller.setHeight(n))},e.prototype.computeScrollerHeight=function(e){return e-subtractInnerElHeight(this.el,this.scroller.el)},e.prototype.setGridHeight=function(e,t){this.opt("monthMode")?(t&&(e*=this.dayGrid.rowCnt/6),distributeHeight(this.dayGrid.rowEls,e,!t)):t?undistributeHeight(this.dayGrid.rowEls):distributeHeight(this.dayGrid.rowEls,e,!0)},e.prototype.computeDateScroll=function(e){return{top:0}},e.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},e.prototype.applyDateScroll=function(e){void 0!==e.top&&this.scroller.setScrollTop(e.top)},e}(View),SimpleDayGrid=(DayGridView.prototype.dateProfileGeneratorClass=DayGridDateProfileGenerator,function(n){function e(e,t){var r=n.call(this,e,t.el)||this;return r.slicer=new DayGridSlicer,r.dayGrid=t,e.calendar.registerInteractiveComponent(r,{el:r.dayGrid.el}),r}return __extends(e,n),e.prototype.destroy=function(){n.prototype.destroy.call(this),this.calendar.unregisterInteractiveComponent(this)},e.prototype.render=function(e){var t=this.dayGrid,r=e.dateProfile,n=e.dayTable;t.receiveProps(__assign({},this.slicer.sliceProps(e,r,e.nextDayThreshold,t,n),{dateProfile:r,cells:n.cells,isRigid:e.isRigid}))},e.prototype.buildPositionCaches=function(){this.dayGrid.buildPositionCaches()},e.prototype.queryHit=function(e,t){e=this.dayGrid.positionToHit(e,t);if(e)return{component:this.dayGrid,dateSpan:e.dateSpan,dayEl:e.dayEl,rect:{left:e.relativeRect.left,right:e.relativeRect.right,top:e.relativeRect.top,bottom:e.relativeRect.bottom},layer:0}},e}(DateComponent)),DayGridSlicer=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.sliceRange=function(e,t){return t.sliceRange(e)},t}(Slicer),DayGridView$1=function(i){function e(e,t,r,n){e=i.call(this,e,t,r,n)||this;return e.buildDayTable=memoize(buildDayTable),e.opt("columnHeader")&&(e.header=new DayHeader(e.context,e.el.querySelector(".fc-head-container"))),e.simpleDayGrid=new SimpleDayGrid(e.context,e.dayGrid),e}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),this.header&&this.header.destroy(),this.simpleDayGrid.destroy()},e.prototype.render=function(e){i.prototype.render.call(this,e);var t=this.props.dateProfile,r=this.dayTable=this.buildDayTable(t,this.dateProfileGenerator);this.header&&this.header.receiveProps({dateProfile:t,dates:r.headerDates,datesRepDistinctDays:1===r.rowCnt,renderIntroHtml:this.renderHeadIntroHtml}),this.simpleDayGrid.receiveProps({dateProfile:t,dayTable:r,businessHours:e.businessHours,dateSelection:e.dateSelection,eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isRigid:this.hasRigidRows(),nextDayThreshold:this.nextDayThreshold})},e}(DayGridView);function buildDayTable(e,t){t=new DaySeries(e.renderRange,t);return new DayTable(t,/year|month|week/.test(e.currentRangeUnit))}var main=createPlugin({defaultView:"dayGridMonth",views:{dayGrid:DayGridView$1,dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}});export default main;export{DayGridView as AbstractDayGridView,DayBgRow,DayGrid,DayGridSlicer,DayGridView$1 as DayGridView,SimpleDayGrid,buildDayTable as buildBasicDayTable};