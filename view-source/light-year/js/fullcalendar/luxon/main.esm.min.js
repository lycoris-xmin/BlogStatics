import{DateTime,Duration}from"luxon";import{createPlugin,Calendar,NamedTimeZoneImpl}from"@fullcalendar/core";var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}))(e,t)};function __extends(e,t){function o(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function toDateTime(e,t){if(t instanceof Calendar)return DateTime.fromJSDate(e,{zone:t.dateEnv.timeZone,locale:t.dateEnv.locale.codes[0]});throw new Error("must supply a Calendar instance")}function toDuration(e,t){if(t instanceof Calendar)return Duration.fromObject(__assign({},e,{locale:t.dateEnv.locale.codes[0]}));throw new Error("must supply a Calendar instance")}var LuxonNamedTimeZone=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.offsetForArray=function(e){return arrayToLuxon(e,this.timeZoneName).offset},t.prototype.timestampToArray=function(e){return luxonToArray(DateTime.fromMillis(e,{zone:this.timeZoneName}))},t}(NamedTimeZoneImpl);function formatWithCmdStr(e,t){var o,r,e=parseCmdStr(e);return t.end?(o=arrayToLuxon(t.start.array,t.timeZone,t.localeCodes[0]),r=arrayToLuxon(t.end.array,t.timeZone,t.localeCodes[0]),formatRange(e,o.toFormat.bind(o),r.toFormat.bind(r),t.separator)):arrayToLuxon(t.date.array,t.timeZone,t.localeCodes[0]).toFormat(e.whole)}var main=createPlugin({cmdFormatter:formatWithCmdStr,namedTimeZonedImpl:LuxonNamedTimeZone});function luxonToArray(e){return[e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond]}function arrayToLuxon(e,t,o){return DateTime.fromObject({zone:t,locale:o,year:e[0],month:e[1]+1,day:e[2],hour:e[3],minute:e[4],second:e[5],millisecond:e[6]})}function parseCmdStr(e){var t,o=e.match(/^(.*?)\{(.*)\}(.*)$/);return o?(t=parseCmdStr(o[2]),{head:o[1],middle:t,tail:o[3],whole:o[1]+t.whole+o[3]}):{head:null,middle:null,tail:null,whole:e}}function formatRange(e,t,o,r){if(e.middle){var n=t(e.head),a=formatRange(e.middle,t,o,r),i=t(e.tail),l=o(e.head),m=formatRange(e.middle,t,o,r),u=o(e.tail);if(n===l&&i===u)return n+(a===m?a:a+r+m)+i}l=t(e.whole),u=o(e.whole);return l===u?l:l+r+u}export default main;export{toDateTime,toDuration};