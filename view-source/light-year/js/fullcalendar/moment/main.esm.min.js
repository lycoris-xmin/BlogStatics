import*as momentNs from"moment";import{createPlugin,Calendar}from"@fullcalendar/core";var moment=momentNs;function toMoment(e,t){if(t instanceof Calendar)return convertToMoment(e,t.dateEnv.timeZone,null,t.dateEnv.locale.codes[0]);throw new Error("must supply a Calendar instance")}function toDuration(e){return moment.duration(e)}function formatWithCmdStr(e,t){var o,n,e=parseCmdStr(e);return t.end?(o=convertToMoment(t.start.array,t.timeZone,t.start.timeZoneOffset,t.localeCodes[0]),n=convertToMoment(t.end.array,t.timeZone,t.end.timeZoneOffset,t.localeCodes[0]),formatRange(e,createMomentFormatFunc(o),createMomentFormatFunc(n),t.separator)):convertToMoment(t.date.array,t.timeZone,t.date.timeZoneOffset,t.localeCodes[0]).format(e.whole)}var main=createPlugin({cmdFormatter:formatWithCmdStr});function createMomentFormatFunc(t){return function(e){return e?t.format(e):""}}function convertToMoment(e,t,o,n){var r;return"local"===t?r=moment(e):"UTC"===t?r=moment.utc(e):moment.tz?r=moment.tz(e,t):(r=moment.utc(e),null!=o&&r.utcOffset(o)),r.locale(n),r}function parseCmdStr(e){var t,o=e.match(/^(.*?)\{(.*)\}(.*)$/);return o?(t=parseCmdStr(o[2]),{head:o[1],middle:t,tail:o[3],whole:o[1]+t.whole+o[3]}):{head:null,middle:null,tail:null,whole:e}}function formatRange(e,t,o,n){if(e.middle){var r=t(e.head),a=formatRange(e.middle,t,o,n),m=t(e.tail),l=o(e.head),i=formatRange(e.middle,t,o,n),c=o(e.tail);if(r===l&&m===c)return r+(a===i?a:a+n+i)+m}l=t(e.whole),c=o(e.whole);return l===c?l:l+n+c}export default main;export{toDuration,toMoment};