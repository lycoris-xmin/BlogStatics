import{rrulestr,RRule}from"rrule";import{createPlugin,refineProps,createDuration}from"@fullcalendar/core";var __assign=function(){return(__assign=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}).apply(this,arguments)},EVENT_DEF_PROPS={rrule:null,duration:createDuration},recurring={parse:function(r,e,t){if(null!=r.rrule){r=refineProps(r,EVENT_DEF_PROPS,{},e),e=parseRRule(r.rrule,t);if(e)return{typeData:e.rrule,allDayGuess:e.allDayGuess,duration:r.duration}}return null},expand:function(r,e){return r.between(e.start,e.end,!0).filter(function(r){return r.valueOf()<e.end.valueOf()})}},main=createPlugin({recurringTypes:[recurring]});function parseRRule(r,e){var t,n,a=null;return"string"==typeof r?t=rrulestr(r):"object"==typeof r&&r&&("string"==typeof(r=__assign({},r)).dtstart&&((n=e.createMarkerMeta(r.dtstart))?(r.dtstart=n.marker,a=n.isTimeUnspecified):delete r.dtstart),"string"==typeof r.until&&(r.until=e.createMarker(r.until)),null!=r.freq&&(r.freq=convertConstant(r.freq)),null!=r.wkst?r.wkst=convertConstant(r.wkst):r.wkst=(e.weekDow-1+7)%7,null!=r.byweekday&&(r.byweekday=convertConstants(r.byweekday)),t=new RRule(r)),t?{rrule:t,allDayGuess:a}:null}function convertConstants(r){return Array.isArray(r)?r.map(convertConstant):convertConstant(r)}function convertConstant(r){return"string"==typeof r?RRule[r.toUpperCase()]:r}export default main;