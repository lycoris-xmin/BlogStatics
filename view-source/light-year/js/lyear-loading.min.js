(function(){$.fn.lyearloading=function(n){var t=$(this),i=$.extend({},{eleObj:null,opacity:.1,backgroundColor:"#000000",imgUrl:"",textColorClass:"",spinnerColorClass:"",spinnerSize:"normal",spinnerText:"",zindex:9999},n);if(t.length==0&&i.eleObj!=null&&(t=i.eleObj),t.length==0)return console.error("未获取到对象"),!1;var u={position:"absolute",width:"100%",height:"100%",top:0,left:0,"background-color":i.backgroundColor,opacity:i.opacity,"z-index":i.zindex},f={position:"absolute","line-height":"120%","text-align":"center","vertical-align":"middle","z-index":i.zindex+1},e={position:"absolute","z-index":i.zindex+1},r="lyear-loading";return this.init=function(){if(t.children("."+r).length>0)t.children("."+r).fadeIn(250);else{var s=$("<div />").addClass(r),o=$("<span />").html($.trim(i.spinnerText)).addClass(r).addClass(i.textColorClass),n=i.imgUrl?$("<img />").attr("src",i.imgUrl).addClass(r):$("<div />").addClass("spinner-border").addClass(r).addClass(i.spinnerColorClass).css(this.getSpinnerSize()),h={resizeStyle:function(){var c=t.find("."+r).parent(),v="fixed,relative".indexOf(c.css("position")),y=v>-1||c[0]===$("."+r)[0].offsetParent,h=y?{top:0,left:0}:{top:c[0].offsetTop,left:c[0].offsetLeft},l=t.outerWidth(),a=t.outerHeight();t[0].localName=="body"?(u.position="fixed",e.position="fixed",f.position="fixed",e.top=$(window).height()/2-n.outerHeight()/2+(i.spinnerText?-4-o.height()/2:0),e.left=$(window).width()/2-n.outerWidth()/2,f.top=$(window).height()/2+n.outerHeight()/2-4,f.left=$(window).width()/2-o.outerWidth()/2):(u.width=l,u.height=a,u.top=h.top,u.left=h.left,e.top=a/2-n.outerHeight()/2+(i.spinnerText?-4-o.height()/2:0)+h.top,e.left=l/2-n.outerWidth()/2+h.left,f.top=a/2+n.outerHeight()/2-4+h.top,f.left=l/2-o.width()/2+h.left);s.css(u);n.css(e);o.css(f)}};u["border-top-left-radius"]=t.css("border-top-left-radius");u["border-top-right-radius"]=t.css("border-top-right-radius");u["border-bottom-left-radius"]=t.css("border-bottom-left-radius");u["border-bottom-right-radius"]=t.css("border-bottom-right-radius");i.opacity&&s.css(u).appendTo(t);$.trim(i.spinnerText)&&o.css(f).appendTo(t);n.css(e).appendTo(t);this.loadImage(i.imgUrl,function(){h.resizeStyle()},function(n){throw new Error(n);});$(window).off("resize."+r).on("resize."+r,function(){h.resizeStyle()})}},this.hide=function(){t.children("."+r).fadeOut(250)},this.show=function(){t.children("."+r).fadeIn(250)},this.destroy=function(){t.children("."+r).fadeOut(250,function(){$(window).off("resize."+r);$(this).remove()})},this.loadImage=function(n,t,i){if(!n)return t();var r;return(r=new Image,r.src=n,r.complete&&t)?t():(r.onload=function(){r.onload=null;t&&t()},r.onerror=function(n){r.onerror=null;i&&i(n)},r)},this.getSpinnerSize=function(){var t;switch(n.spinnerSize){case"sm":t={width:"12px",height:"12px"};break;case"nm":t={width:"24px",height:"24px"};break;case"md":t={width:"36px",height:"36px"};break;case"lg":t={width:"48px",height:"48px"};break;default:t={width:n.spinnerSize,height:n.spinnerSize}}return t},this.init(),this}})(jQuery);